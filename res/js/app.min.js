const header=document.querySelector("header"),sections=document.querySelectorAll("section"),headerSelectorLINE=document.querySelector("#headerSelectorLINE"),href=window.location.pathname.lastIndexOf(".html")>=0?window.location.href.slice(0,window.location.href.lastIndexOf("/")+1):window.location.origin+window.location.pathname;function _start(){function onClickFunc(){function show(id){sections.forEach(section=>{section.id!=id?section.style.display="":section.style.display="block"})}header.onclick=e=>{let childs=header.firstElementChild.children,s="";for(let index=0;index<childs.length;index++)childs[index].style.opacity="";e.target.style.opacity=1,s=e.target.innerText,s=s.substring(s.length-1),show("p"+s)}}function section1(){const tit=sections[0].querySelector(".sectionTitle"),des=sections[0].querySelector(".sectionDes"),p1LINE=sections[0].querySelector(".p1LINE"),header=sections[0].querySelectorAll(".p1Nav");let datas=[];function Data(tit,des){this.tit=tit,this.des=des}function onClickFunc(){let r;function switchData(newID,node){let body=sections[0].querySelector(".sectionBody"),time=300;tit.innerText=datas[newID].tit,tit.id=newID,des.innerText=datas[newID].des}sections[0].querySelector("nav").onclick=e=>{r=e.target.closest(".p1Nav"),r&&r.id!=tit.id&&(header.forEach(r=>{r.style.color="",r.firstElementChild.style.color=""}),p1LINE.style.left=r.offsetLeft+"px",p1LINE.style.width=r.offsetWidth+"px",r.style.color="var(--mainC)",r.firstElementChild.style.color="var(--mainC)",switchData(r.id,r))}}datas.push(new Data("React","Lots of people use React as the V in MVC. Since React makes no assumptions about the rest of your technology stack, it's easy to try it out on a small feature in an existing project.")),datas.push(new Data("Angular","HTML is great for declaring static documents, but it falters when we try to use it for declaring dynamic views in web-applications. AngularJS lets you extend HTML vocabulary for your application. The resulting environment is extraordinarily expressive, readable, and quick to develop.")),datas.push(new Data("Ember","Ember.js is an open-source JavaScript application framework, based on the model-view-controller (MVC) pattern. It allows developers to create scalable single-page web applications by incorporating common idioms and best practices into the framework. What is your favorite JS framework?")),datas.push(new Data("Design","Graphic designers communicate ideas through text and image. Therefore, communication skills are critical to the job. However, communication is important in graphic design in other ways too.")),onClickFunc(),tit.innerText=datas[0].tit,tit.id=0,des.innerText=datas[0].des,header[0].style.color="var(--mainC)",header[0].firstElementChild.style.color="var(--mainC)"}function section2(){const section=sections[1],list=section.querySelector(".playerList"),audio_DOM=section.querySelector("audio"),controller=section.querySelector(".playerController");_controllerPrototype();let audios=[],audio_nodes=[],shuffle=!1,loop=!1;function _controllerPrototype(){controller._playTrigger=function(){4==audio_DOM.readyState?(audio_DOM.play(),audio_DOM.paused||(section.querySelector("#playerPlay").classList.add("active"),section.querySelector(".playerMusicCover_").style.animationPlayState="")):audio_DOM.oncanplay=()=>{audio_DOM.play(),audio_DOM.paused||(section.querySelector("#playerPlay").classList.add("active"),section.querySelector(".playerMusicCover_").style.animationPlayState="")}},controller._pauseTrigger=function(){audio_DOM.pause(),section.querySelector("#playerPlay").classList.remove("active"),section.querySelector(".playerMusicCover_").style.animationPlayState="paused"},controller._trigger=function(nodeType){nodeType&&this.querySelector(nodeType).classList.toggle("active")}}function _get_audio_information(){let _idForAudioObj=0;function AudioObj(name,audioUrl,avatarUrl,singer){this.name=name,audioUrl.startsWith("http")?this.auSrc=audioUrl:this.auSrc=href+"res/audio/sect2/"+audioUrl,avatarUrl.startsWith("http")?this.imSrc=avatarUrl:this.imSrc=href+"res/img/sect2/"+avatarUrl,this.id=_idForAudioObj++,this.singer=singer?`Ca sĩ: ${singer}`:"Ca sĩ: Mình chưa cập nhật ca sĩ :>"}audios.push(new AudioObj("Kẻ Cắp Gặp Bà Già","Kẻ Cắp Gặp Bà Già.mp3","0.jpg")),audios.push(new AudioObj("Tình bạn diệu kỳ","Tình bạn diệu kỳ.mp3","1.jpg")),audios.push(new AudioObj("Whenever, Wherever","Whenever, Wherever.mp3","2.jpg")),audios.push(new AudioObj("Dj Scratch - Dancing With Your Ghost","Dj Scratch - Dancing With Your Ghost.mp3","3.jpg")),audios.push(new AudioObj("Nyanpasu","Nyanpasu.mp3","4.jpg")),audios.push(new AudioObj("Anh Có Muốn Đưa Em Về Không Remix","https://tainhac123.com/listen/anh-co-muon-dua-em-ve-khong-orinn-edm-remix-ngo-lan-huong.rhhhFvCKQa6u.html","https://vcdn1-ione.vnecdn.net/2021/01/19/ngo-lan-huong1-9374-1611031839.jpg?w=460&h=0&q=100&dpr=2&fit=crop&s=kx-T4eSLyKuTjNvtNH1Egg","Ngô Lan Hương")),audios.push(new AudioObj("Cafe Không Đường","https://tainhac123.com/listen/cafe-khong-duong-jombie-ft-tkan-ft-bean.hPhCwnAGC2uE.html","https://scontent-sin6-2.xx.fbcdn.net/v/t1.6435-9/122153335_204601281276322_2967761281933981578_n.jpg?_nc_cat=108&ccb=1-3&_nc_sid=09cbfe&_nc_ohc=uDuSYjGifVIAX_22xGN&tn=VC56bvycyqK9imMw&_nc_ht=scontent-sin6-2.xx&oh=5c557a86d71f45b985db12545e7ccd33&oe=60DE3C1F","Tkan x Jombie G5R")),audios.push(new AudioObj("Muộn rồi mà sao còn","https://tainhac123.com/listen/muon-roi-ma-sao-con-son-tung-m-tp.6nAqBAZ3nxuV.html","https://upload.wikimedia.org/wikipedia/commons/f/fe/Son_Tung_M-TP_1_%282017%29.png","Sơn Tùng MTP"))}function _appendAudioToListDOM(){function _append(data){let node=document.createElement("div");node.classList.add("playerItem"),node.id=data.id,node.innerHTML=`\n              <div class="playerItemAvatar" style="background-image: url('${data.imSrc}')">\n                <div class="playerItemAvatar_"></div>\n              </div>\n              <div class="playerItemInfo">\n                <p class="playerItemTitle">${data.name}</p>\n                <p class="playerItemSinger">${data.singer}</p>\n              </div>\n              <div class="playerItemMore" title="This is useless button :>"><i class="ti-more"></i></div>`,audio_nodes.push(node),list.appendChild(node)}audios.forEach(i=>_append(i))}function _setAudioDOMOnStart(){if(audios[0]){const audio=audios[0],name=section.querySelector(".playerMusicName"),cv=section.querySelector(".playerMusicCover_");audio_DOM.src=audio.auSrc,audio_DOM.id=audio.id,name.innerText=audio.name,audio_nodes[0].classList.add("active"),cv.style.backgroundImage=`background-image: url('${audio.imSrc}')`,controller._pauseTrigger()}}function _setOnClick(){const musicName=section.querySelector(".playerMusicName"),musicCover=section.querySelector(".playerMusicCover_");let clickedAfterDefay=!1,last_clicked_nodeLIST=audio_nodes[0];function _onclickList(e){function _onclickTrigger(node){if(node.id&&last_clicked_nodeLIST&&last_clicked_nodeLIST!=node){last_clicked_nodeLIST.classList.remove("active"),node.classList.add("active"),last_clicked_nodeLIST=node;let audio=audios[node.id];musicName.innerText=audio.name,musicCover.style.backgroundImage=`url('${audio.imSrc}')`,audio_DOM.src=audio.auSrc,audio_DOM.id=audio.id,controller._pauseTrigger(),audio_DOM.oncanplay=controller._playTrigger}}e.target.closest(".playerItem")&&!e.target.closest(".playerItemMore")&&_onclickTrigger(e.target.closest(".playerItem"))}function _onclickController(e){function _onclickTrigger(node){switch(node.id){case"playerPlay":node.classList.contains("active")?controller._pauseTrigger():controller._playTrigger();break;case"playerNext":last_clicked_nodeLIST.id<audios.length-1?audio_nodes[parseInt(last_clicked_nodeLIST.id)+1].click():audio_nodes[0].click();break;case"playerPrev":last_clicked_nodeLIST.id>0?audio_nodes[parseInt(last_clicked_nodeLIST.id)-1].click():audio_nodes[audio_nodes.length-1].click();break;case"playerSuf":controller._trigger("#"+node.id),shuffle=!!controller.querySelector("#playerSuf").classList.contains("active");break;case"playerRepeat":controller._trigger("#"+node.id),controller.querySelector("#playerRepeat").classList.contains("active")?(loop=!0,audio_DOM.setAttribute("loop","true")):(loop=!1,audio_DOM.removeAttribute("loop"))}last_clicked_nodeBTN=node}e.target.closest(".playerControllerBtn")&&_onclickTrigger(e.target.closest(".playerControllerBtn"))}list.onclick=_onclickList,controller.onclick=_onclickController}function audioTimeConverter(time){let result="";if(result=time<10?"00:0"+parseInt(time):"00:"+parseInt(time),time>59){let m,s;if(m=parseInt(time/60),s=parseInt(time%60),s=s<10?`0${s}`:s+"",result=m<10?`0${m}:${s}`:`${m}:${s}`,m>59){let h;if(h=parseInt(m/60),m%=60,m=m<10?`0${m}`:m+"",result=h<10?`0${h}:${m}:${s}`:`${h}:${m}:${s}`,h>23){let d;d=parseInt(h/24),h%=24,h=h<10?`0${h}`:h+"",result=`${d}:${h}:${m}:${s}`}}}return result}function _trackLengthBar(){const bar=section.querySelector(".playerProgressed"),timeStatus=bar.querySelector(".onHover");let __interval;function _actionWithBar(){const barBG=section.querySelector(".playerProgress");let down=!1,xClientOnDown,xOffsetOnDown,percentage,playing;barBG.onmousedown=e=>{playing=!audio_DOM.paused,controller._pauseTrigger(),down=!0,xClientOnDown=e.clientX,xOffsetOnDown=e.offsetX,barBG.classList.add("active"),percentage=e.offsetX/barBG.offsetWidth,timeStatus.innerText=audioTimeConverter(audio_DOM.duration*percentage)+" / "+audioTimeConverter(audio_DOM.duration),bar.style.width=`${100*percentage}%`},window.addEventListener("mousemove",e=>{down&&(bar.style.transition="none",percentage=(xOffsetOnDown+(e.clientX-xClientOnDown))/barBG.offsetWidth,percentage>1&&(percentage=1),percentage<0&&(percentage=0),timeStatus.innerText=audioTimeConverter(audio_DOM.duration*percentage)+" / "+audioTimeConverter(audio_DOM.duration),bar.style.width=`${100*percentage}%`)}),window.addEventListener("mouseup",e=>{down&&(down=!1,bar.style.transition="",barBG.classList.remove("active"),audio_DOM.currentTime=audio_DOM.duration*percentage,console.log("playing",playing),playing||console.log("Stopped"))})}_actionWithBar(),audio_DOM.ondurationchange=()=>{console.log("duration change"),clearInterval(__interval),bar.style.width=`${audio_DOM.currentTime/audio_DOM.duration*100}%`,timeStatus.innerText=audioTimeConverter(audio_DOM.currentTime)+" / "+audioTimeConverter(audio_DOM.duration)},audio_DOM.onplaying=()=>{console.log("playing"),clearInterval(__interval),__interval=setInterval(()=>{bar.style.width=`${audio_DOM.currentTime/audio_DOM.duration*100}%`,timeStatus.innerText=audioTimeConverter(audio_DOM.currentTime)+" / "+audioTimeConverter(audio_DOM.duration)},100)},audio_DOM.onended=()=>{if(clearInterval(__interval),console.log("loop",loop,"shuffle",shuffle),controller._pauseTrigger(),loop||shuffle||(audio_DOM.id<audios.length-1?audio_nodes[parseInt(audio_DOM.id)+1].click():audio_nodes[0].click()),!loop&&shuffle){let randomId=parseInt(Math.random()*audios.length);if(randomId==audio_DOM.id)for(;randomId==audio_DOM.id;)randomId=parseInt(Math.random()*audios.length);audio_nodes[randomId].click()}console.log("ended")},audio_DOM.onpause=()=>{clearInterval(__interval),console.log("pause")}}audio_DOM.volume=.1,_get_audio_information(),_appendAudioToListDOM(),_setAudioDOMOnStart(),_setOnClick(),_trackLengthBar()}onClickFunc(),section1(),section2()}console.log("href",href),_start();